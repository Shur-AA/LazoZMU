<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ЗМУ Падь Просёлочная</title>
    <link href='../css/layout/main.css' , rel='stylesheet', type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,500,700&display=swap&subset=cyrillic" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/data.js"></script>
    <script src="https://code.highcharts.com/modules/series-label.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/annotations.js"></script>
    <script src="https://www.highcharts.com/media/com_demo/js/highslide-full.min.js"></script>
    <script src="https://www.highcharts.com/media/com_demo/js/highslide.config.js" charset="utf-8"></script>
    <link rel="stylesheet" type="text/css" href="https://www.highcharts.com/media/com_demo/css/highslide.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css">
    <script src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js"></script>

</head>
<body>
    <div class="wrapper">
        <div class="zaplatka"></div>
        <div id="graphic-container" ></div>
        <div class="wrapper__container">
            <div class="content">
                <div class="infobuttoms">
                    <button class="info_buttoms" id = "what">ЧТО ТАКОЕ ЗМУ</button>
                    <div class="text-hidden">
                        <b>ЗИМНИЙ МАРШРУТНЫЙ УЧЁТ</b> — ежегодная работа в каждом заповеднике России. Она проводится с целью определения видового состава и численности животных, прежде всего, копытных и хищных, а также птиц. Это помогает оценить состояние их популяций. Результаты маршрутных исследований заносятся в основной научный документ заповедника — <b>Летопись природы</b>.
                    </div>
                    <div class="text-hidden">
                        Для закрепления маршрутов на местности используются пикеты — обозначенные цветом деревья через равные расстояния. В летнее время ЗМУ используются не только для изучения животного мира, но и растительных сообществ. <b>Цифрами</b> на графике обозначены номера пикетов; <b>в плавающем окне</b> — краткая информация о его положении; <b>нажмите</b> на точку пикета и Вы узнаете, какие растения там можно встретить.
                    </div>
                    <button class="info_buttoms" id = "how">КАК РАБОТАТЬ С ГРАФИКОМ</button>
                    
                </div>
                <div class="slider-container">
                    <div class="slider">
                        <div><img class="slider-img" src="../img/piket17.JPG" alt="Пикет №17" title="Пикет №17"></div>
                        <div><img class="slider-img" src="../img/piket13scene.JPG" alt="Территория вокруг пикета №13" title="Территория вокруг пикета №13"></div>
                        <div><img class="slider-img" src="../img/lastoven.JPG" alt="Ластовень заострённый" title="Ластовень заострённый"></div>
                        <div><img class="slider-img" src="../img/padriver.JPG" alt="Падь просёлочная" title="Падь просёлочная в районе пикета №18"></div>
                        <div><img class="slider-img" src="../img/kakalia.JPG" alt="Какалия копьевидная" title="Какалия копьевидная"></div>
                        <div><img class="slider-img" src="../img/piketmap.JPG" alt="Карта пикетов" title="Плановое расположение пикетов"></div>
                    </div>
                </div>
                
                
            </div>
        </div>
        <footer class="footer">
                  &#xA9 ФГБУ "Лазовский заповедник и национальный парк 'Зов тигра'"; МГУ им. М.В. Ломоносова
        </footer>
    </div>
    
<!-- graphic -->
    <script>
        Highcharts.chart('graphic-container', {

            chart: {
                scrollablePlotArea: {
                    minWidth: 700
                },
                type: 'area'
            },

            data: {
                csvURL: 'https://shur-aa.github.io/LazoZMU/textdata/proselochny.csv',
                beforeParse: function (csv) {
                    return csv.replace(/\n\n/g, '\n');
                }
            },

            title: {
                text: 'ЗМУ "Падь Просёлочная"'
            },

            subtitle: {
                text: 'Продольный профиль по маршруту'
            },

            xAxis: {
                tickInterval: 200,
                tickWidth: 0,
                title: {
                    text: 'Протяжённость маршрута, км'
                },
                gridLineWidth: 1,
                labels: {
                    align: 'left',
                    x: -10
                }
            },

            yAxis: [{ // left y axis
                title: {
                    text: 'Высота, м'
                },
                labels: {
                    align: 'left',
                    x: -5,
                    y: 13,
                },
                showFirstLabel: false,
                floor: 20
            }, { // right y axis
                linkedTo: 0,
                gridLineWidth: 0,
                opposite: true,
                title: {
                    text: 'Высота, м'
                },
                labels: {
                    align: 'right',
                    x: 5,
                    y: 13,
                },
                showFirstLabel: false
            }],

            credits: {
                enabled: false
            },
            // #78061B
            annotations: [{
                labelOptions: {
                    backgroundColor: 'grey',
                    allowOverlap: true,
                    // verticalAlign: 'top',
                    y: -15
                },
                labels: [{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 0,
                        y: 0
                    },
                    text: '0'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 200,
                        y: 0
                    },
                    text: '1'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 400,
                        y: 0
                    },
                    text: '2'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 600,
                        y: 0
                    },
                    text: '3'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 800,
                        y: 0
                    },
                    text: '4'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 1000,
                        y: 2
                    },
                    text: '5'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 1200,
                        y: 2
                    },
                    text: '6'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 1400,
                        y: 17
                    },
                    text: '7'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 1600,
                        y: 19
                    },
                    text: '8'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 1800,
                        y: 21
                    },
                    text: '9'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 2000,
                        y: 41
                    },
                    text: '10'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 2200,
                        y: 38
                    },
                    text: '11'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 2400,
                        y: 46
                    },
                    text: '12'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 2600,
                        y: 54
                    },
                    text: '13'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 2800,
                        y: 61
                    },
                    text: '14'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 3000,
                        y: 63
                    },
                    text: '15'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 3200,
                        y: 75
                    },
                    text: '16'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 3400,
                        y: 82
                    },
                    text: '17'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 3600,
                        y: 94
                    },
                    text: '18'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 3800,
                        y: 98
                    },
                    text: '19'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 4000,
                        y: 103
                    },
                    text: '20'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 4200,
                        y: 111
                    },
                    text: '21'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 4400,
                        y: 115
                    },
                    text: '22'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 4600,
                        y: 129
                    },
                    text: '23'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 4800,
                        y: 131
                    },
                    text: '24'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 5000,
                        y: 144
                    },
                    text: '25'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 5200,
                        y: 161
                    },
                    text: '26'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 5400,
                        y: 175
                    },
                    text: '27'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 5600,
                        y: 195
                    },
                    text: '28'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 5800,
                        y: 218
                    },
                    text: '29'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 6000,
                        y: 247
                    },
                    text: '30'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 6200,
                        y: 274
                    },
                    text: '31'
                },{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 6400,
                        y: 303
                    },
                    text: '32'
                }]
                },{labelOptions: {
                    backgroundColor: 'grey',
                    allowOverlap: true,
                    verticalAlign: 'top',
                    x: -3,
                    y: 15
                },
                labels: [{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 6600,
                        y: 350
                    },
                    text: '33'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 6750,
                        y: 380
                    },
                    text: '34'
                }]
            },{labelOptions: {
                    backgroundColor: '#C8E7A0',
                    allowOverlap: true,
                    x: -3,
                    y: 15
                },
                labels: [{
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 150,
                        y: 380
                    },
                    text: '<-В'
                }, {
                    point: {
                        xAxis: 0,
                        yAxis: 0,
                        x: 5900,
                        y: 380
                    },
                    text: 'З->'
                }]
            }],


            legend: {
                enabled: false
            },

            tooltip: {
                shared: true,
                crosshairs: true,
                borderColor: '#9FB87A',
                useHTML: true,
                headerFormat: '<table>',
                pointFormat: '<tr><td>Высота: </td>' +
                    '<td class="intooltip"><b>{point.y} м</b></td></tr>' +
                    '<tr><td>Расстояние от начала: </td>' +
                    '<td class="intooltip"><b>{point.x} м</b></td></tr>',
                footerFormat: '</table>'
            },

            plotOptions: {
                series: {
                    cursor: 'pointer',
                    point: {
                        events: {
                            click: function (e) {
                                const xhr = new XMLHttpRequest();
                                xhr.open('GET', 'https://shur-aa.github.io/LazoZMU/textdata/proselochny.json');
                                xhr.send();
                                xhr.onload = function () {
                                    var text = JSON.parse(this.response);
                                    console.log(text[5].descr);
                                    hs.htmlExpand(null, {
                                        pageOrigin: {
                                            x: e.pageX || e.clientX,
                                            y: e.pageY || e.clientY
                                        },
                                        headingText: 'Описание пикета ' + e.point.index,
                                        maincontentText: text[e.point.index].descr,
                                        width: 300
                                    })
                                };
                            }
                        }
                    },
                    marker: {
                        lineWidth: 1
                    }
                }
            },

            series: [{
                color: '#C8E7A0',
                name: 'All sessions',
                lineWidth: 4,
                marker: {
                    radius: 4
                }
            }, {
                name: 'New users'
            }]
        });

    </script>
<!-- info buttons -->
   <script>
    $(document).ready(() => {
    $("#what").on('click', e => {
        let elem = $(e.currentTarget).next();
        elem.slideToggle();
    })
    $("#how").on('click', e => {
        let elem = $(e.currentTarget).prev();
        elem.slideToggle();
    })
});
   </script>
<!-- slider -->
    <script>
        $(document).ready(function(){
        $('.slider').bxSlider({captions: true});
        });
    </script>
</body>
</html>
